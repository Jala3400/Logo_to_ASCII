use std::process::Command;

#[test]
fn tentacles_ball() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/sources/tentacles.png")
        .arg("-b")
        .arg("all")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  .Â·'qpbd8
Char size: 8x16, Line gap: 0
Block size: 8x16
Image dimensions: 416x432
Number of characters: 52x27
                .                                   
            .p88888p.                 p'            
          p8888888888q               88'            
         d8888'  '8888               888            
        d888''    '''8               '888.          
        ' .Â·p8888888pÂ·.               8888.         
        q8888888888888888.            88888         
     .d88888888888888888888.        .d88888         
    .88888888888888888888888b   .q88888888'         
   .8888888888'' .p.   '888888 '888888''            
   888888888' .q8888.    888888 '88                 
  p88888888  d8888888q    88888q '.      ..pqp8pp.  
  88888888    88888888q    '8888b '888888888888888q 
 .88888888     88888888b  Â· '88888Â· ''888888888' 88 
 888888888      88888888q     '88888bÂ·.    ''  . p8 
 888888888.      88888888.       '888888888888' .8  
 8888888888       88888888           '''''''' .d8'  
 88888888888.     88888888.           .pppp8888'    
 888888888888b    '88888888       .q888888888'      
 88888888888888.   88888888.   .q8888888888'        
 888888888888888Â· Â·888888888  d88888888888          
 8888888888888888. 888888888  88888888888           
 '8888888888888888 '888888888 88888888888           
  8888888888888888. 888888888 '8888888888.          
  '888888888888888' 888888888. 88888888888          
   '88888888888888  8888888888 88888888888.         
    '888888888888' 88888888888 '88888888888         
[0m"#;
    assert_eq!(stdout.trim(), expected.trim());
}

#[test]
fn tentacles_padx16_pady24_ball_nv() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/sources/tentacles.png")
        .arg("-b")
        .arg("all")
        .arg("-n")
        .arg("-v")
        .arg("--padx")
        .arg("16")
        .arg("--pady")
        .arg("24")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  .Â·'qpbd8
Char size: 8x16, Line gap: 0
Block size: 8x16
Applied padding of 16x24
Image dimensions: 448x480
Number of characters: 56x30
                                                        
                 ....                    p8             
             p888''''88q               q8d8             
           p8'         8b            .88 d8             
          88      .     8            8b   8.            
         p8     88'8    8b           '8   '8q           
         8 pq8888888888q8q.           8b    8b          
        .888'            888p          8     8b         
      .88'                  d8q      .d8     db         
     p8b                      88.pq888'      8'         
    p8            pppqppq      888        pq8'          
   .8          pq8'   8888p     d8   .pq88'             
   8b        q88       8b'8p     88 d8'   .pqp88888p.   
  d8        q88p        8bd8p     8bd8888'''       '8b  
  8b        8''8q        88b8bp    d8q            p  8b 
  8b        8   8q        88p88q     888pqqpp   p88  8b 
  8         8b   8b        888888qp      '8888888q8 q8  
 d8         d8.   8b        8    '88qqp       qpd8  8'  
 db          d8q   8        8q       '888888888'  p8'   
 db           d88. 8b        8     .q88'        p8'     
 db             d8qdb        8b .q88'         q8'       
 db               88b         888'          p8'         
 d8                8q         8b           d8           
  8                 8p        d8           db           
  8p                db         8           db           
  '8                d8         8b          d8           
   8b               d8          8           8b          
    8bp             8b          8p           8          
     '88888888888888888888888888888888888888888         
                                                        
[0m"#;
    assert_eq!(stdout.trim(), expected.trim());
}

#[test]
fn tentacles_ball_n() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/sources/tentacles.png")
        .arg("-b")
        .arg("all")
        .arg("-n")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  .Â·'qpbd8
Char size: 8x16, Line gap: 0
Block size: 8x16
Image dimensions: 416x432
Number of characters: 52x27
8888888888888888888888888888888888888888888888888888
8888888888888'     '888888888888888888'd888888888888
8888888888'          '888888888888888  d888888888888
888888888     pppq    88888888888888b   888888888888
88888888b  .pp8888qqq.888888888888888p   88888888888
88888888q888'       '88888888888888888    d888888888
88888888'                8888888888888     888888888
888888b                    8888888888'     d88888888
8888b             qqpp      d8888'        p888888888
888b          qp88'8888q      8q      pq888888888888
888         p88'    d888b      8p qq8888888888888888
88b        d8        '888bp    d8pd88888888''' ''888
88        d88b        '8888p    d8q               '8
8b        88888         8bd8q     d8pq         p8  8
8         888888p        88p88q     '88888bpqp888  8
8         d888888p       8888888pq            qd8 d8
8          8888888        8888888888pqqqqpppq88' d88
b           888888p       d888888888888''''    p8888
b            d8888b        88888888'         q888888
b              888b        d8888'          q88888888
b               d8b         88            8888888888
8                d8         8b           d8888888888
8p                8b         8           d8888888888
8b                db         8p          d8888888888
88p               d8         d8           8888888888
888p              db          8           d888888888
8888q            q8           8p           888888888
[0m"#;
    assert_eq!(stdout.trim(), expected.trim());
}

#[test]
fn tentacles_w100_padx16_ball_center_v() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/sources/tentacles.png")
        .arg("-w")
        .arg("100")
        .arg("--padx")
        .arg("16")
        .arg("-b")
        .arg("all")
        .arg("-v")
        .arg("--center")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  .Â·'qpbd8
Char size: 8x16, Line gap: 0
Block size: 8x16
Original dimensions 416x432
Applied padding of 16x1
Image dimensions: 832x832
Number of characters: 104x52
88888888888888888888888888888888'88'88888888888888888888888888888888888888888'   88888888888888888888888
88888888888888888888888888'   ..pppq..  ''888888888888888888888888888888888   q  88888888888888888888888
88888888888888888888888'  .q88888888888bq  '88888888888888888888888888888' .d8' d88888888888888888888888
888888888888888888888'  q88888888888888888q  88888888888888888888888888'  p888' 888888888888888888888888
8888888888888888888'  d88888888888888888888b  888888888888888888888888'  88888' 888888888888888888888888
888888888888888888  .88888888888888888888888b d88888888888888888888888  8888888  88888888888888888888888
88888888888888888  d888888888888'''8888888888  88888888888888888888888  8888888.  8888888888888888888888
8888888888888888' .8888888888'  .q  888888888  88888888888888888888888b '8888888.  888888888888888888888
8888888888888888  88888888888  888Â· '88888888  888888888888888888888888  88888888b  '8888888888888888888
8888888888888888 Â·88888''  ..Â·Â·Â·Â·Â·Â·Â·Â·..   ''  d888888888888888888888888b  888888888.  888888888888888888
8888888888888888 '8'  .q8888888888888888888p..   '8888888888888888888888q  888888888.  88888888888888888
8888888888888888   Â·8888888888888888888888888888p.  '88888888888888888888. 8888888888. d8888888888888888
88888888888888  .d888888888888888888888888888888888p  '888888888888888888  88888888888  8888888888888888
888888888888  .88888888888888888888888888888888888888p  '888888888888888  p88888888888 d8888888888888888
8888888888' .888888888888888888888888888888888888888888Â·  8888888888'   .8888888888888  8888888888888888
888888888  d888888888888888888888888888888888888888888888  '888''   .q888888888888888' d8888888888888888
88888888  888888888888888888888888888888888888888888888888.    .q8888888888888888888  .88888888888888888
8888888  88888888888888888888888888'''    '''88888888888888p '8888888888888888888'   q888888888888888888
888888  88888888888888888888888'' .pp888   .  '8888888888888b '88888888888888''  .pd88888888888888888888
88888' Â·88888888888888888888b' .q88888888  '8q  '888888888888Â· '88888888''   .pq888888888888888888888888
88888  8888888888888888888'  q888888888888.  88  '888888888888. 88888'   pq88888888888888888888888888888
8888  8888888888888888888' q888888888888888q  88. '888888888888  8888  888888888'''    ...pqqq..  '88888
8888 .88888888888888888'  888888888888888888q  88  '888888888888  888  ''''    ..qp88888888888888p  '888
888' p8888888888888888'    '88888888888888888b  8   '888888888888. 8888pppd888888888888888888888888q  88
888  88888888888888888  88  '88888888888888888q    8  d88888888888Â· '8888888888888888888888888888888. d8
888 .8888888888888888d d888.  88888888888888888b   88. '888888888888. '88888888888888888888888' 88888 d8
88b 88888888888888888d d8888q  888888888888888888   88b  8888888888888Â·  '8888888888888888888'  88888 d8
88  88888888888888888d d88888q  88888888888888888b    88. '88888888888888p.  ''    '8888888'  8 8888' d8
88  888888888888888888  888888b  '8888888888888888.  .   '  '88888888888888888ppÂ·.........Â·q88' 8888  88
88 .888888888888888888. 88888888  '8888888888888888  888pq.    '88888888888888888888888888888' p888' .88
88 '8888888888888888888  88888888  8888888888888888b  88888888p   '888888888888888888888888'  d8888  d88
8b 88888888888888888888q  8888888b  8888888888888888. '8888888888pq   '''888888888888888'' .q88888  p888
8b 888888888888888888888q  8888888p '8888888888888888  88888888888888ppq.     '''''    .pp888888'  p8888
8b 8888888888888888888888b  '88888b  8888888888888888. '888888888888888'   .d88888888888888888'  p888888
8b 888888888888888888888888p  '8888  88888888888888888  888888888888'   .d888888888888888888'  p88888888
8b 88888888888888888888888888.  888b 88888888888888888. d88888888'  .q88888888888888888888'  q8888888888
8b 888888888888888888888888888b  888 '88888888888888888  88888'  .q88888888888888888888'   q888888888888
8b 88888888888888888888888888888. '8 '88888888888888888. d88  .q8888888888888888888888  .d88888888888888
8b 888888888888888888888888888888Â·   '888888888888888888    .88888888888888888888888'  q8888888888888888
8b 8888888888888888888888888888888q  8888888888888888888  .888888888888888888888888  p888888888888888888
8b 88888888888888888888888888888888Â· '8888888888888888888 888888888888888888888888  d8888888888888888888
8b '88888888888888888888888888888888Â· 8888888888888888888 '88888888888888888888888 .88888888888888888888
8b  888888888888888888888888888888888  888888888888888888q 88888888888888888888888 d88888888888888888888
88  888888888888888888888888888888888q 8888888888888888888 '8888888888888888888888 Â·88888888888888888888
88b '888888888888888888888888888888888 '888888888888888888. 8888888888888888888888  88888888888888888888
888  888888888888888888888888888888888  8888888888888888888 8888888888888888888888  d8888888888888888888
888b '88888888888888888888888888888888  8888888888888888888 '888888888888888888888b  8888888888888888888
8888  '8888888888888888888888888888888  8888888888888888888. 8888888888888888888888  '888888888888888888
88888  '888888888888888888888888888888 d88888888888888888888 8888888888888888888888b  888888888888888888
888888  '8888888888888888888888888888' 888888888888888888888 '8888888888888888888888. '88888888888888888
8888888. '888888888888888888888888888  888888888888888888888b 88888888888888888888888  d8888888888888888
88888888q  '''''''''''''''''''''''''' ''''''''''''''''''''''' ''''''''''''''''''''''''  8888888888888888
[0m"#;
    assert_eq!(stdout.trim(), expected.trim());
}
