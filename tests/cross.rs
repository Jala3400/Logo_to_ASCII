use std::process::Command;

#[test]
fn cross() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/Cross_Calatrava.png")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  .Â·'qpbd8
Char size: 8x16, Line gap: 0
Block size: 8x16
Image dimensions: 480x480
Number of characters: 60x30
                             ..                             
                            .88.                            
                          Â·888888Â·                          
                          '888888'                          
                     ....  '8888'  ....                     
                  Â·8888888. 8888 .8888888Â·                  
                  888888888888888888888888                  
                  8888   'd8888888'   8888                  
                   d88p    888888    q88b                   
          Â·88888b.   '88p  '8888'  q88'   .d88888Â·          
         .88888888b     '8Â· 8888 Â·8'     d88888888.         
         88888   '88     .8 8888 8.     88'   88888         
         '8888.    '8. ..'' 8888 ''.. .8'    .8888'         
    Â·88p.  '8888Â·..  ''''   8888   ''''  ..Â·8888'  .q88Â·    
 ..888888888888888888888888888888888888888888888888888888.. 
  '888888888888888888888888888888888888888888888888888888'  
    '88'   .8888'    .Â·Â·Â·   8888   Â·Â·Â·.    '8888.   '88'    
         .8888'    d8'  '.. 8888 ..'  '8b    '8888.         
         88888   q88      8 8888 8      88p   88888         
         '88888888'     Â·8' 8888 '8Â·     '88888888'         
          '88888'    q88'  .8888.  '88p    '88888'          
                  .888'    p8888q    '888.                  
                  8888   .88888888.   8888                  
                  888888888888888888888888                  
                  '8888888' 8888 '8888888'                  
                      '''  .8888.  '''                      
                          .888888.                          
                          '888888'                          
                            '88'                            
                             ''                             
[0m"#;
    assert_eq!(stdout.trim(), expected.trim());
}

#[test]
fn cross_nv() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/Cross_Calatrava.png")
        .arg("-n")
        .arg("-v")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  .Â·'qpbd8
Char size: 8x16, Line gap: 0
Block size: 8x16
Image dimensions: 480x480
Number of characters: 60x30
88888888888888888888888888888bd88888888888888888888888888888
88888888888888888888888888888  88888888888888888888888888888
88888888888888888888888888b      d88888888888888888888888888
88888888888888888888888888p      p88888888888888888888888888
888888888888888888888888888p    q888888888888888888888888888
888888888888888888b       8b    d8       d888888888888888888
88888888888888888b                        d88888888888888888
88888888888888888b    888qp      qp888    d88888888888888888
888888888888888888bp  d8888p    q8888b  qd888888888888888888
8888888888b     '888bq  '88b    d88'  pd888'     d8888888888
888888888b        d88888q db    db p88888b        d888888888
888888888     88bp  888888 b    d 888888  qd88     888888888
888888888q    8888bp 8888ppb    dqq8888 qd8888    p888888888
8888b  88888    888888qpp88b    d88qpp888888    88888  d8888
888                                                      888
8pq                                                      pq8
8888q qpq88b   qpqp888d8888b    d8888b888ppqp   888pqp p8888
8888888888    p8888  p8pq88b    d88pd8q '8888q    d888888888
888888888     888b qd8888p b    d q8888bp d888     888888888
888888888p        q88888b qb    dp d88888p        q888888888
8888888888q     qq8888  pd8b    d8bq  8888pp     p8888888888
8888888888888888888   q8888      8888p   8888888888888888888
888888888888888888    8888        8888    888888888888888888
88888888888888888b                        d88888888888888888
888888888888888888q       pb    dq       p888888888888888888
888888888888888888888pqpq88b    d88pqpq888888888888888888888
888888888888888888888888888      888888888888888888888888888
88888888888888888888888888q      p88888888888888888888888888
8888888888888888888888888888q  p8888888888888888888888888888
88888888888888888888888888888bd88888888888888888888888888888
[0m"#;
    assert_eq!(stdout.trim(), expected.trim());
}

#[test]
fn cross_all() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/Cross_Calatrava.png")
        .arg("--all")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  `.-',:_~";!^r+><=*?|\L/icl)(Tv7ztJsY1x{Inuf}][CFjo23ya5SVeZ4wPhmkXGE$69qpAKbdUOgHD8RMW0&#%QNB@
Char size: 8x16, Line gap: 0
Block size: 8x16
Image dimensions: 480x480
Number of characters: 60x30
                             ,.                             
                            _@@_                            
                          _@@@@@@_                          
                          "@@@@@@"                          
                    _____  "@@@@"  _____                    
                  _@@@@@@@__@@@@__@@@@@@@_                  
                  @@@@@@@@@@@@@@@@@@@@@@@@                  
                  @@@@   "0@@@@@@#"   @@@@                  
            ___   `4@@L    V@@@@V    g@@#`   ___            
          _@@@@@g_  `*0@g_ '@@@@' _g@B*   _@@@@@@_          
         /@@@@@@@@b     "QL @@@@ /B"     g@@@@@@@@\         
         @@@@@   *@@     _@ @@@@ @_     @@F   @@@@@         
         "@@@@_    *@____`" @@@@ "`____@P    _@@@@"         
    _@@>____@@@@>____"*^*___@@@@L__*^*"____<@@@@____g@@L    
___@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@___
 `"Q@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B"` 
    "@B*`  _@@@#"`` __==_   @@@@   _==__ ``"0@@@_  `*0@"    
         _@@@@"   ,g@" ``__ @@@@ __`` "@g    "@@@@_         
         @@@@@  _/@#     `@ @@@@ @`     0@L_  @@@@@         
         "@@@@@@@@P    __@F @@@@ *@__    *@@@@@@@@"         
          "@@@@@P`  _<@@P  .@@@@. `*@@>_  `4@@@@@"          
                  ,@@@F    @@@@@&    *@@@.                  
                  @@@@  __@@@@@@@@__  @@@@                  
                  @@@@@@@@@@@@@@@@@@@@@@@@                  
                  "@@@@@@@" @@@@ "@@@@@@B"                  
                     `"""  /@@@@\  """`                     
                          ,@@@@@@,                          
                          "@@@@@B"                          
                            `@@`                            
                             ''                             
[0m"#;
    assert_eq!(stdout.trim(), expected.trim());
}

#[test]
fn cross_w100_padx4() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/Cross_Calatrava.png")
        .arg("--wc")
        .arg("100")
        .arg("--pad-x")
        .arg("4")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  .Â·'qpbd8
Char size: 8x16, Line gap: 0
Block size: 8x16
Original dimensions 480x480
Applied padding of 4x0
Image dimensions: 808x800
Number of characters: 101x50
                                                  8                                                  
                                                 p8q                                                 
                                                d888b                                                
                                             .d8888888b.                                             
                                            8888888888888                                            
                                            '88888888888'                                            
                                             '888888888'                                             
                                    ......    '8888888'    ......                                    
                                .d888888888.   8888888   .888888888b.                                
                              .8888888888888b..8888888..d8888888888888.                              
                              88888888888888888888888888888888888888888                              
                              88888888'''8888888888888888888'''88888888                              
                              8888888      '8888888888888'      8888888                              
                               888888.       88888888888       .888888                               
                     .....      '88888b.      888888888      .d88888'      .....                     
                  Â·88888888b.     ''88888.    888888888    Â·88888''     .d88888888.                  
                 8888888888888.       '8888.  '8888888'  .8888'       .8888888888888                 
                p88888888888888b         '888 '8888888' 888'         d88888888888888q                
                88888888'  '88888          '8.'8888888'.8'          88888'  '88888888                
                88888888      8888.       .d8''8888888''8b.       .8888      88888888                
                88888888.      '888p      '88''8888888''88'      q888'      .88888888                
         ..      '8888888Â·       '888p.d88    '8888888'    88b.q888'       Â·8888888'      ..         
       .88888Â·.    '8888888p..      ''''''    '8888888'    ''''''      ..q8888888     .Â·88888.       
      d888888888888888888888888888888888888888888888888888888888888888888888888888888888888888b      
 ..q888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888p.. 
  ''888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888''  
      '888888888888888888888888888888888888888888888888888888888888888888888888888888888888888'      
       '88888'     .8888888''      ..Â·qqqq    '8888888'    pqqqÂ·..      ''8888888.     '88888'       
                 Â·8888888'       Â·888'''88    '8888888'    88'''888Â·       '8888888.                 
                88888888       .888'      .p8Â·'8888888'Â·8q.      '888.       88888888                
                88888888     .8888'       ''8''8888888''8'        '8888.     88888888                
                88888888....88888          d8''8888888''8b          88888....88888888                
                888888888888888'        .q888 '8888888' 888p.        '888888888888888                
                 8888888888888'      .q8888'  '8888888'  '8888p.      '8888888888888                 
                  '888888888'     .q88888'    888888888    '88888p.     '888888888'                  
                      '''       Â·888888       888888888       888888Â·       '''                      
                               888888'       d888888888b       '888888                               
                              8888888      Â·8888888888888Â·      8888888                              
                              88888888ppq8888888888888888888pqq88888888                              
                              88888888888888888888888888888888888888888                              
                              '88888888888888''8888888' 88888888888888'                              
                                '8888888888'   8888888   '8888888888'                                
                                     ''''     p8888888q     ''''                                     
                                             Â·888888888Â·                                             
                                            p88888888888q                                            
                                            8888888888888                                            
                                             ''8888888''                                             
                                                '888'                                                
                                                 '8'                                                 
                                                  8                                                  
[0m


"#;
    assert_eq!(stdout.trim(), expected.trim());
}

#[test]
fn cross_padx4_pady8() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/Cross_Calatrava.png")
        .arg("--pad-x")
        .arg("4")
        .arg("--pad-y")
        .arg("8")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  .Â·'qpbd8
Char size: 8x16, Line gap: 0
Block size: 8x16
Applied padding of 4x8
Image dimensions: 488x496
Number of characters: 61x31
                              .                              
                              8                              
                           .q888p.                           
                           8888888                           
                           '88888'                           
                   .q8888b  b888d  d8888p.                   
                  Â·88888888p88888q88888888Â·                  
                  8888''''888888888''''8888                  
                  '888.    '88888'    .888'                  
           .qppp.   '888.   88888   .888'   .qppp.           
          p8888888Â·    '88. 88888 .88'    Â·8888888q          
          8888'''88b      8.88888.8      d88'''8888          
          8888.   '88     8'88888'8     88'   .8888          
     ..    '888p    '8pq8   88888   8pp8'    q888'    ..     
    d8888ppp8888888ppppppppp88888ppppppppp8888888ppp8888b    
 Â·888888888888888888888888888888888888888888888888888888888Â· 
    '8888'''8888888'''''''''88888'''''''''8888888'''8888'    
      '   .q888'    .8''8   88888   8''8.    '888p.   '      
          8888'   .88     8'88888'8     88.   '8888          
          8888b.Â·888      d'88888'b      888Â·.d8888          
          '8888888'    Â·88' 88888 '88Â·    '8888888'          
            '''''   Â·888'   88888   'd88Â·   '''''            
                  .888'    d88888b    '888.                  
                  8888b.Â·p888888888pÂ·.d8888                  
                  '88888888'88888'88888888'                  
                    '8888'  8888d  '8888'                    
                           .88888.                           
                           8888888                           
                            '888'                            
                              8                              
                              '                              
[0m

"#;
    assert_eq!(stdout.trim(), expected.trim());
}

#[test]
fn cross_csize17_center_padx4_nv() {
    let output = Command::new("cargo")
        .arg("run")
        .arg("--")
        .arg("./images/Cross_Calatrava.png")
        .arg("--char-size")
        .arg("17")
        .arg("--center")
        .arg("--pad-x")
        .arg("4")
        .arg("-n")
        .arg("-v")
        .arg("--verbose")
        .output()
        .expect("Failed to execute command");

    assert!(output.status.success());
    let stdout = String::from_utf8_lossy(&output.stdout);
    let expected = r#"
Characters:  Â·.'pbqd8
Char size: 9x17, Line gap: 0
Block size: 9x17
Applied padding of 7x6
Image dimensions: 494x492
Number of characters: 55x29
8888888888888888888888888888888888888888888888888888888
888888888888888888888888888 888888888888888888888888888
8888888888888888888888888     8888888888888888888888888
888888888888888888888888p     q888888888888888888888888
8888888888888888888888888p   q8888888888888888888888888
88888888888888888'      8b   d8      d88888888888888888
8888888888888888b                     d8888888888888888
8888888888888888b   d88qp     qq88b   d8888888888888888
88888888888888888qp  8888     8888  qd88888888888888888
8888888888      888qq  88p   q88 qqd888      8888888888
888888888    qq  d8888qpdb   dbqd8888  qqp    888888888
888888888    888q  8888' b   d d8888  q888    888888888
888888888qp   8888q 8b'88b   d88'd8 q8888   qd888888888
8888'   ''8     '''''''''     '''''''''     8''   d8888
8qp                                                 q88
8888p   qqq     qqqppqqqqp   qqqqqqqqqp     qqp   q8888
88888qd888   qd888' qqq88b   d88qqq d888q    888qd88888
888888888    8888 qd888p b   d q8888p 8888    888888888
888888888     '  q88888bqb   dpd88888p  '    q888888888
888888888bp    qq888' qq8b   d8q  8888q     qd888888888
888888888888qq8888  qq888     888q   8888qq888888888888
8888888888888888b   d888       888b   d8888888888888888
8888888888888888b                     d8888888888888888
88888888888888888q     qdb   dq      q88888888888888888
88888888888888888888qqq88    d88qqq88888888888888888888
888888888888888888888888b     d888888888888888888888888
888888888888888888888888qp   qq888888888888888888888888
88888888888888888888888888q d88888888888888888888888888
888888888888888888888888888q888888888888888888888888888
[0m

"#;
    assert_eq!(stdout.trim(), expected.trim());
}
